<mat-tab-group mat-align-tabs="center" [selectedIndex]="activeTabs">
    <mat-tab label="Cadastro dos produtos">
        <div class="container-form" fxLayout="column" fxLayoutALign="space-around stretch">

            <form [formGroup]="productForm" class="form mat-elevation-z4" fxLayout="column" 
            fxLayoutAlign="space-around stretch" fxLayoutGap="15" *ngIf="!loading">
                <h1 class="title-form">Produtos</h1>
                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <mat-form-field fxFlex="45">
                        <mat-label>Produto</mat-label>
                        <input matInput type="text" placeholder="nome do produto" formControlName="name">
                        <mat-error *ngIf="productForm.controls['name'].hasError('required')">
                            Campo de preenchimento obrigatório
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field fxFlex="45">
                        <mat-label>Marca</mat-label>
                        <input matInput type="text" placeholder="marca do produto" formControlName="brand">
                    </mat-form-field>
                </div>

                <div fxLayout="row" fxLayoutAlign="space-between center">
                    <mat-form-field fxFlex="30">
                        <mat-label>Quantidade</mat-label>
                        <input matInput type="number" placeholder="quantidade" formControlName="amount">
                        <mat-error *ngIf="productForm.controls['amount'].hasError('min')">
                            Campo de preenchimento obrigatório
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field fxFlex="20">
                        <mat-label>Unidade</mat-label>
                        <mat-select formControlName="unit" placeholder="unidade do produto">
                            <mat-option *ngFor="let unit of units" [value]="unit">
                                {{unit.acronym}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field fxFlex="30">
                        <mat-label>Preço R$</mat-label>
                        <input matInput type="text" placeholder="preço R$" formControlName="price" 
                        currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" >
                        <mat-error *ngIf="productForm.controls['price'].hasError('min')">
                            Campo de preenchimento obrigatório
                        </mat-error>
                    </mat-form-field>
                </div>
                <div fxLayout="row" fxLayoutAlign="space-around stretch">
                    <button mat-icon-button color="primary" [disabled]="productForm.invalid" (click)="onSubmit()">
                        Check<mat-icon>done</mat-icon>
                    </button>
                    <button mat-icon-button color="accent">Cancel<mat-icon>clear</mat-icon></button>
                </div>
            </form>
            <mat-spinner *ngIf="loading" mode="indeterminate"></mat-spinner>
        </div>
    </mat-tab>

    <mat-tab label="Meus produtos">
        <table mat-table [dataSource]="products" class="mat-elevation-z8" fxFill="100">
          
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> Id </th>
              <td mat-cell *matCellDef="let element"> {{element.id}} </td>
            </ng-container>
          
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Produto </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
          
            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef> Preço un. </th>
              <td mat-cell *matCellDef="let element"> R$ {{element.price | currency: 'BRL'}} </td>
            </ng-container>
          
            <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef> Quantidade </th>
              <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
            </ng-container>

            <ng-container matColumnDef="total">
                <th mat-header-cell *matHeaderCellDef> Total </th>
                <td mat-cell *matCellDef="let element"> {{(element.amount) * (element.price) | currency: 'BRL'}} </td>
              </ng-container>

              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-icon-button color="primary" (click)="updateProduct()"><mat-icon>update</mat-icon></button>
                    <button mat-icon-button color="accent" (click)="deleteProduct()"><mat-icon>delete</mat-icon></button>
                </td>
              </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
    </mat-tab>

    <mat-tab label="test"></mat-tab>
  </mat-tab-group>